<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Affiliates</title>
<link rel="stylesheet" href="style.css">
<script src="app.js" defer></script>
</head>
<body>

<div id="topBar"><div class="rainbow-text">Affiliates</div></div>
<div id="coins">Coins: 0</div>

<div class="section">
  <h3>Your Invite Code</h3>
  <input type="text" id="myInvite" readonly>
  <button onclick="generateInviteCode()">Generate / Refresh Code</button>

  <h3>Use Another User's Invite Code</h3>
  <input type="text" id="inputInvite" placeholder="Enter Invite Code">
  <button onclick="claimInvite()">Claim Bonus</button>

  <h3>Affiliate Bonuses</h3>
  <div id="affiliateBonuses"></div>

  <button onclick="location.href='index.html'">Return Home</button>
</div>

<script>
function generateInviteCode(){
  let code = localStorage.getItem('inviteCode');
  if(!code){
    code = Math.floor(100000000000 + Math.random()*900000000000); // 12-digit code
    localStorage.setItem('inviteCode', code);
  }
  document.getElementById('myInvite').value = code;
}

function claimInvite(){
  const input = document.getElementById('inputInvite').value;
  let claimed = JSON.parse(localStorage.getItem('claimedInvites')||'[]');
  if(input && !claimed.includes(input)){
    updateCoins(5); // Reward 5 coins for using invite
    claimed.push(input);
    localStorage.setItem('claimedInvites', JSON.stringify(claimed));
    alert("Bonus Claimed! +5 coins");
    updateAffiliateDisplay();
  } else alert("Invalid or already claimed code");
}

function updateAffiliateDisplay(){
  const bonuses = JSON.parse(localStorage.getItem('claimedInvites')||'[]');
  const div = document.getElementById('affiliateBonuses');
  div.innerHTML = bonuses.map(b => `<div>Used invite: ${b} â†’ 10% bonus</div>`).join('');
}

generateInviteCode();
updateAffiliateDisplay();
</script>
</body>
</html>
